# 크립토 경제와 PoS

## 암호경제학
* 과거에 발생한 property에 대한 특성을 증명하기 위해 암호화폐를 사용하는 것

## 암호학 원리
* ECDSA 서명(타원 곡선 알고리즘)을 통해 거래함
* 데이터 전송 시 특정 데이터 값을 가지는데 이 때 데이터의 손실이 일어남, 이를 방지하기 위해 특정한 방법으로 인코딩을 함
* TIMELOCK : 메세지 A와 B의 시간을 보장함.
* 경제적 인센티브
    * 토큰 : 프로트콜로 정의된 만큼 마이너에게 주는 리워드
    * 특권 : 의사결정권
    * 보상 및 패널티가 어떻게 적용되는가 > 암호경제학의 보안 마진을 사용
    * 크립토 경제 증명 > 이 증명이 사실이라고 확신하며, 아니라면 손해를 감수하겠다는 것.
    * 선택모형 :
        * 비통합 선택모형. 모든 참여자는 독립적이고 서로 다른 인센티브 요소를 가짐
        * 통합 선택 모형 : 모든 행위자가 같은 인센티브와 동기를 가지고 있다고 생각함. 항상 협력
        * 뇌물 공격자 모델 : 비통합모형을 취함. 서로 다른 행위자는 서로 다른 인센티브 동기를 가지고 공격자는 일부 행위자를 매수하여 원하는 방식으로 움직이게 만들려고 함.

## PoS
* 네트워크의 경제적 지분에 직접적으로 투표권이 비율로 적용된다.
* 캐스퍼
* PoS : 프로세스에서 minting을 진행하여, 계산자원을 전혀 이용하지 않으므로 시스템에 자금을 보유한 검증자에게 의존한다.
* 비잔티움 장애 허용 증명 : 검증자가 블록을 제안
* 체인 기반 지분증명 : 검증자가 블록을 생성
* 기존 검증자 그룹에서 검증자를 고른다. 이는 전원분의 가중치를 가진다. 검증자는 새로운 블록을 생성한다. 보류중인 거래를 조사하고 유효한 거래를 확인하고 블록을 생성한다.
* 선택된 검증자는 보상과 거래 수수료를 받게 된다.


## bft PoS
1. 설정값에 따라 검증자가 무작위로 선택됨
2. 검증자가 블록을 제안한다. 블록생성에 대한 모든 직업을 수행하지만 블록을 생성하지 않고 다수가 해당 블록이 유효하다고 생각하면 블록이 유효화된다.(3분의 2이상이 투표)
3. 블록이 추가되면 검증자는 보상 및 거래 수수료를 받는다.

## PoS
* 51% 공격을 원천 차단할 수 있다.
* 지분을 많이 가질수록 인센티브가 커진다.
* 자금 유동이 느리다.
* 지분은 판매 가능하지만 이해 당사자가 활동하지 않으면 네트워크는 일부 사람의 손에 넘어가게 된다.

## 공격
* 체인기반 공격
    * 패널티가 없음. 행위자는 경제적으로 이성적인 사람, 이타적이고 정직한 사람, 악의적인 사람이 존재한다.
    * 지분 증명 때마다 서명 특권을 부여받은 64명의 검증자를 무작위로 선택함 이들은 2000블록을 임의로 받음
    * 포크마다 선택된 블록 중 최장 블록을 선택함.
    * 악의적인 검증자가 동시 서명을 해도 미래의 검증자가 이를 막을 수 있음
    * 그러나 모든 검증자가 동시에 접속해야 되기 때문에 시간적인 불가능이 존재함.
    * 검증자 중 누군가가 잘못된 블록에 서명한 경우 보증금을 잏게 됨
  * 완결성 공격 : 블록체인 이력 변경을 시도할 경우 이를 막을 때 커뮤니티가 결정
  * 51% 공격 : 51%의 보팅파워를 가진 검증자가 합의에 도달하지 못하도록 함. 이를 방어하기 위해 프로트콜을 추가함 일정 시간동안 합의에 도달하지 않으면 검증자를 변경함
  * 검열공격(*) : 악의적인 행위자가 67%의 투표력을 가질 경우 정상검열과 구분 불가능하다는 점에서 위험함
      * 검열을 비싸게 만듦
      * 시간 잠금
  * 그라인딩 공격(*) : 무작위 특성을 이용하여 다음 선택된 검증자는 지난 검증자에게 종속됨
      * 모든 검사자가 사전에 지분을 예치
      * 무작위성을 위해 사용되는 블록의 다양한 매개변수를 제거함
  * 데이터 비유용성 공격 : 공격자가 기형 거래를 여러개 생성하고 전원이 이를 확인하고 다운로드 가능한 경우 이것이 무효되고 공격자는 다시 작성함. 부적절한 데이터임을 공격자가 숨길 경우 문제가 됨
      * 방어 : 이레이저 코드를 사용.
