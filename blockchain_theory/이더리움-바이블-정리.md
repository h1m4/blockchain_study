#이더리움 바이블 정리

* [이더리움 바이블](https://programmers.co.kr/learn/courses/7322)
* 프로그래머스에서 제공하는 다른 강의를 수강하기 전, 다시 개념을 정리할 겸 들음.

## 스마트 컨트렉트

* [참고](https://blockgeeks.com/guides/smart-contracts/)
* 1994년 닉 자보가 처음 제안함
* 디지털 명령어로 계약서를 작성하면 조건에 따라 계약서의 내용을 자동적으로 실행할 수 있다고 주장.
* 블록체인 기술을 이용하여 대금결제, 송금 등의 모든 종류의 계약을 처리할 수 있도록 기능을 확장하면서 널리 확산
* 계약자간의 모든 조건이 충족되면 계약이 이행되도록 함(if-then), 그러므로 변호사등의 필요성이 사라질 수 있음.
* 스마트 컨트렉트의 코드는 솔리디티로 작성되어 EVM 바이트 코드로 컴파일 된다.
* EVM : 이더리움 가상머신. 튜링 완전성을 가지며 이더리움 프로트콜의 일부.
* 튜링 완전성 : 계산 문제를 그 프로그래밍 언어나 추상 머신으로 풀 수 있다는 뜻
    * 이더리움 등에서 튜링 완전하다는 표현을 차용한 이유는 블록체인은 LOOP 문법을 배제함으로써 보안을 강화했으나 복잡한 스마트 컨트렉트를 만들 수 없게 되었음.
    * 이더리움은 튜링 완전한 문법을 사용함으로써 비트코인보다 더 복잡한 조건을 만들 수 있게 됨 > 스마트 컨트렉트의 출현
    * 특정 조건마다 가스를 소모해야 하는 이유는 반복문을 사용함으로써 필수적으로 야기되는 무한 루프 공격을 방지하기 위함임.




## 이더리움의 단위

* 이더리움의 최소 단위는 wei (wei의 10의 18승 = 1ether)
* 이더리움 블록체인의 기본 통화가 ehter이다

## 주소

* 이더리움에는 개인키와 공개키가 존재함

#### 공개 키 생성방법

* [Public Key Cryptography](https://www.youtube.com/watch?v=GSIDS_lvRv4)
* [Symmetric Key and Public Key Encryption](https://www.youtube.com/watch?v=ERp8420ucGs)
* RSA 알고리즘
예를 들어 어떤 사람 A가 B에게 중요한 문서를 주려고 할 때 암호화만 가능한 키(공개키)를 통해서 B에게 전달하면 복호화가 가능한 키(개인키)를 통해 풀 수 있다.
    * 개인키를 먼저 생성한 후, 개인키로부터 공개키를 생성한다.
    * KECCAK256알고리즘을 사용하여 공개키의 해시값을 계산한다.
    * 생성된 해시값의 뒤 20바이트를 취하여 이더리움 주소를 생성한다.
    * [KECCAK256 생성 예시](https://emn178.github.io/online-tools/keccak_256.html)

## 계정

* EOA(외부 소유 계정) : 공개 주소와 개인키의 조합. 다른 계정과 이더를 송수신하고 스마트 컨트렉트의 트랜젝션을 보낼 수 있다.
* 컨트렉트 계정 : 상응하는 개인키가 없다. 이더리움을 송수신하고 관련 코드를 담고 EOA 또는 다른 컨트렉트의 호출을 받아 트랜젝션을 발생시킨다.

## WALLET

* 비결정적 지갑 : 임의의 개인키/공개키 쌍을 사용하는 유형의 지갑. 각 주소는 하나의 거래에만 사용해 주소의 재사용을 피한다. (보안 좋음)
* 결정적 지갑 : 마스터키(SEED로 부터 생성)를 사용해 다른 모든 키를 생성한다. 코드 워드를 통해 다른 키를 생성할 수 있음
* 계층 결정적 지갑 : SEED로 부터 생성된 마스터키를 통해 많은 CHILD키또는 GRAND CHILD키를 생성할 수 있음. 관리가 용이.

## GAS

* 가스 : 연산의 단위. 트랜젝션을 동작시키기 위해 소모되는 비용. 코드 복잡도에 따라 다르게 측정된다.
* 여기서 GAS PRICE는 사용자가 정하는데, 보통 이걸 높게 측정하면 빨리 올릴 수 있다.
* GAS LIMIT도 정하는데 이는 트랜젝션이 다 실행 될 때까지 사용할 용의가 있는 가스양의 한도(예측치)이다. 한 블록에 넣을 수 있는 가스 LIMIT의 총합(BLOCK GAS LIMIT)을 넘을 수 없다.
* 각 블록에 가스 한도가 있는 이유는 누군가 무한 루프를 실행할 수 없도록 방지하기 위함
* 마이너들이 가져가는 GAS의 양은 GAS LIMIT * GAS PRICE이다.
